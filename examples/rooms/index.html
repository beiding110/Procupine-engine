<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>标题</title>
	<meta name="keywords" content="">
	<meta name="description" content="">

	<style>
		.btns {
			position: fixed;
			top: 0;
			right: 0;
			z-index: 100;
			font-size: 60px;
			padding: 20px;
			color: #666;
		}
	</style>

	<!-- <script type="text/javascript" src="./js/vue.min.js"></script>
	<script type="text/javascript" src="./js/jquery-3.1.1.min.js"></script> -->
	<script type="text/javascript" src="../../dist/procupine.js"></script>
</head>

<body>
	<div id="main_con">
		<div class="btns">
			<div class="btn shift">⇄</div>
		</div>
	</div>

	<script type="text/javascript">
		var chartlet = [
			'bathRoom', 'bedRoom', 'kidRoom', 'kitchen', 'livingRoom', 'Mars', 'secondBedroom', 'theBridge'
		],
			faces = ['posx', 'negx', 'posy', 'negy', 'posz', 'negz'];

		// 生成随机场景
		function roundScene() {
			var sel = Math.round(Math.random() * (chartlet.length - 1)),
				chartletArr = faces.map(function (item) {
					return './images/' + chartlet[sel] + '/' + item + '.jpg'
				});

			return chartletArr;
		}

		// 首个随机场景
		var chartletArr = roundScene();

		var pe = new Pro({
			scene: {
				type: 'css',
				chartlet: chartletArr
			},
			marks: [
				{
					x: 0,
					y: 360,
					click: () => {
						alert('This is a MARK, you can add click event on it.');
					},
				},
				{
					x: -20,
					y: 10,
					click: (e) => {
						console.log(e);
						alert('This is another MARK, you can add click event on it.');
					},
				},
				{
					x: 30,
					y: 20,
					click: () => {
						var chartletArr = roundScene();

						// 更换场景
						pe.$scene.chartletCSS3D(chartletArr);
					},
				},
			],
			mode: 'orientation', //orientation,drag
			handler: function (obj) {
				console.log(obj)
			}
		});

		(function () {
			var btnShift = document.querySelector('.btn.shift');

			btnShift.addEventListener('click', () => {
				var currentMode = pe.$setting.mode,
					mode = currentMode === 'drag' ? 'orientation' : 'drag';

				pe.switchModel(mode, () => {
					alert(`mode: ${mode}`);
				});
			});
		}());
	</script>
</body>

</html>