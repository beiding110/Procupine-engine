!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Pro",[],e):"object"==typeof exports?exports.Pro=e():t.Pro=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){function n(t){this.init(t)}n.prototype={init:function(t){this.$el=document.querySelector(t.el)},build:function(t){var e=this.deepTree(t);this.$dom=e,this.$el.appendChild(e)},clear:function(){this.$el.innerHtml=""},deepTree:function(t){var e=this,n=document.createElement(t.tag);return t.attr&&Object.keys(t.attr).forEach(function(e){n.setAttribute(e,t.attr[e])}),t.children&&t.children.length>0&&t.children.forEach(function(t){n.appendChild(e.deepTree(t))}),n}},t.exports=n},function(t,e,n){var r=n(2),s=n(3),o=n(4),i=n(5);function a(t){this.xrot=0,this.yrot=0,this.zrot=0,this.eventer=null,this.init(t),console.log("Pro init")}a.prototype={init:function(t){this.$setting=t;t.scene&&(this.$scene=new s(t.scene)),t.marks&&(this.$marks=new o(t.marks)),"drag"===this.$setting.mode?this.switchModel("drag"):this.switchModel("orientation")},update:function(t){this.xrot=t.x,this.yrot=t.y,this.zrot=t.z,this.$setting.scene&&"css"==this.$setting.scene.type&&this.$scene.driveCSS3D({x:t.x,y:t.y,z:t.z}),this.$setting.marks&&this.$marks.driveCSS3D({x:t.x,y:t.y,z:t.z}),this.$setting.handler&&this.$setting.handler({x:this.xrot,y:this.yrot,z:this.zrot})},switchModel:function(t,e,n){var s=this;try{s.eventer.destroy()}catch(t){}({drag:function(){s.eventer=new i({handler:function(){s.update({x:+this.xr_sum,y:-this.yr_sum,z:0})}}),s.$setting.mode="drag",e&&e()},orientation:function(){if(!window.DeviceOrientationEvent)return console.error("您的浏览器不支持相关传感器的调用，已为您打开拖拽模式"),s.switchModel("drag"),void(n&&n());window.ondeviceorientation=function(){var t=new r(event);t.R_X,t.R_Y,t.R_z;s.update({x:t.R_X,y:t.R_Y,z:t.R_Z}),t=null},s.eventer={destroy:function(){window.ondeviceorientation=null}},s.$setting.mode="orientation",e&&e()}})[t]()}},t.exports=a},function(t,e){function n(t){var e=event.alpha,n=event.beta,r=event.gamma;event.absolute;return{R_Z:-r*Math.cos(this.deg2radian(n)),R_X:(n-90)*Math.cos(this.deg2radian(r)),R_Y:-(e+r)}}n.prototype={deg2radian:function(t){return t*(Math.PI/180)}},t.exports=n},function(t,e,n){var r=n(0);function s(t){this.init(t)}s.prototype={init:function(t){this.$setting=t,this.J2D=new r({el:"body"}),t.type&&"canvas"===t.type||this.initCSS3D(),this.$dom=this.J2D.$dom,this.$setting.chartlet&&Array.isArray(this.$setting.chartlet)&&this.$setting.chartlet.length>0&&(t.type&&"canvas"===t.type||this.chartletCSS3D(this.$setting.chartlet))},initCSS3D:function(){var t="width:1026px; height:1026px; position:absolute;",e={tag:"div",attr:{style:"position:fixed; left:0; right:0; top:0; bottom:0; overflow:hidden;",class:"css3__scene--con"},children:[{tag:"div",attr:{style:"transform-style:preserve-3d; perspective:398.135px; width:100%; height:100%;",class:"css3__scene--stage"},children:[{tag:"div",attr:{style:"position:relative; left:0; right:0; top:0; bottom:0; transform-style:preserve-3d; width:100%; height:100%; transform:translate3d(50%,50%,398.135px)",class:"css3__scene--box"},children:[{tag:"img",attr:{style:t+"transform:translate3d(-50%,-50%,0) rotateY(-90deg) translateZ(-512px); background-color:red;",class:"css3__scene--faces"}},{tag:"img",attr:{style:t+"transform:translate3d(-50%,-50%,0) rotateY(90deg) translateZ(-512px); background-color:orange;",class:"css3__scene--faces"}},{tag:"img",attr:{style:t+"transform:translate3d(-50%,-50%,0) rotateX(-90deg) translateZ(-512px); background-color:yellow;",class:"css3__scene--faces"}},{tag:"img",attr:{style:t+"transform:translate3d(-50%,-50%,0) rotateX(90deg) translateZ(-512px); background-color:green;",class:"css3__scene--faces"}},{tag:"img",attr:{style:t+"transform:translate3d(-50%,-50%,0) rotateY(0deg) translateZ(-512px); background-color:blue;",class:"css3__scene--faces"}},{tag:"img",attr:{style:t+"transform:translate3d(-50%,-50%,0) rotateY(180deg) translateZ(-512px); background-color:purple;",class:"css3__scene--faces"}}]}]}]};this.J2D.build(e)},chartletCSS3D:function(t){this.$dom.querySelectorAll(".css3__scene--faces").forEach(function(e,n){e.setAttribute("src",t[n])})},driveCSS3D:function(t){if("css"===this.$setting.type){var e=t.x,n=t.y,r=t.z;document.querySelector(".css3__scene--box").style.transform="translate3d(0,0,398.135px) rotateZ("+r+"deg) rotateX("+e+"deg) rotateY("+n+"deg) translate3d(50%,50%,0)"}else console.error("Your Scene is not css3d model")}},t.exports=s},function(t,e,n){var r=n(0);function s(t){this.init(t)}s.prototype={init:function(t){this.$setting=t,this.J2D=new r({el:"body"}),this.initCSS3D(),this.$dom=this.J2D.$dom,this.$setting&&Array.isArray(this.$setting)&&this.$setting.length>0&&this.markCSS3D(this.$setting)},initCSS3D:function(){var t={tag:"div",attr:{style:"position:fixed; left:0; right:0; top:0; bottom:0; overflow:hidden;",class:"css3__marks--con"},children:[{tag:"div",attr:{style:"transform-style:preserve-3d; perspective:398.135px; width:100%; height:100%;",class:"css3__marks--stage"},children:[{tag:"div",attr:{style:"position:relative; left:0; right:0; top:0; bottom:0; transform-style:preserve-3d; width:100%; height:100%; transform:translate3d(50%,50%,398.135px)",class:"css3__marks--box"},children:[]}]}]};this.J2D.build(t)},markCSS3D:function(t){var e=this.$dom.querySelector(".css3__marks--box");t.forEach(function(t){var n=t.x,r=t.y,s=document.createElement("div");s.className="css3__marks--item";var o=-n,i=360-r%360;s.style="\n                width: 60px; \n                height: 60px; \n                position: absolute;\n                background: rgba(255,255,255,.7); \n                border-radius: 50%;\n                transform-origin: center center;\n                transform: rotateX("+o+"deg) rotateY("+i+"deg) translate3d(0, 0, -511px);\n            ",s.addEventListener("click",t.click),e.appendChild(s)})},driveCSS3D:function(t){var e=t.x,n=t.y,r=t.z;document.querySelector(".css3__marks--box").style.transform="translate3d(0,0,398.135px) rotateZ("+r+"deg) rotateX("+e+"deg) rotateY("+n+"deg) translate3d(50%,50%,0)"}},t.exports=s},function(t,e){function n(t){this.init(t)}n.prototype={init:function(t){this.xr=0,this.yr=0,this.xr_sum=0,this.yr_sum=0,this.$setting=t,this.last_x=0,this.last_y=0,this.eventType="";"ontouchstart"in document?this.initListener("touch"):this.initListener("mouse")},initListener:function(t){this.eventType=t;var e=["ontouchstart","ontouchmove","ontouchend"],n=this;"mouse"===t&&(e=["onmousedown","onmousemove","onmouseup"]),document[e[0]]=function(r){r.preventDefault();var s="touch"===t?r.touches[0]:r,o=s.clientX,i=s.clientY;return document[e[1]]=function(e){e.preventDefault();var r="touch"===t?e.touches[0]:e,s=r.clientY-i,a=r.clientX-o;n.xr=s/2,n.yr=a/2,n.xr_sum=n.last_x+n.xr,n.yr_sum=n.last_y+n.yr,n.$setting.handler&&n.$setting.handler.call(n)},document[e[2]]=function(){document[e[1]]=null,document[e[2]]=null,n.last_x=n.xr_sum,n.last_y=n.yr_sum,console.log(n.last_x,n.last_y)},!1}},destroy:function(){({touch:["ontouchstart","ontouchmove","ontouchend"],mouse:["onmousedown","onmousemove","onmouseup"]})[this.eventType].forEach(function(t){document[t]=null})}},t.exports=n}])});