{"version":3,"sources":["webpack://Pro/webpack/universalModuleDefinition","webpack://Pro/webpack/bootstrap","webpack://Pro/./src/index.js","webpack://Pro/./src/lib/Device.js","webpack://Pro/./src/lib/Dragger.js","webpack://Pro/./src/lib/Json2Dom.js","webpack://Pro/./src/lib/Marks.js","webpack://Pro/./src/lib/Scene.js","webpack://Pro/./src/lib/var.js"],"names":["Device","require","Scene","Marks","Dragger","Pro","setting","xrot","yrot","zrot","eventer","init","console","log","prototype","$setting","that","scene","$scene","marks","$marks","mode","switchModel","update","obj","x","y","z","type","driveCSS3D","handler","success","failed","destroy","e","switchObj","drag","xr","yr","orientation","window","DeviceOrientationEvent","error","deviceorientationHandler","event","revent","R_X","R_Y","R_Z","addEventListener","ondeviceorientation","removeEventListener","module","exports","a_alpha","alpha","B_beta","beta","Y_gamma","gamma","abs","absolute","Math","cos","deg2radian","deg","radian","PI","eventType","_state","_handlers","_eventsMap","touch","mouse","document","initListener","_handlerBuilder","startX","startY","last_x","last_y","startHandler","preventDefault","stopPropagation","ev","touches","clientX","clientY","moveHandler","deltaX","deltaY","xrSpeed","yrSpeed","call","endHandler","eventArr","passive","Json2Dom","$el","querySelector","el","build","json","vdom","deepTree","$dom","appendChild","clear","innerHtml","node","tag","createElement","attr","Object","keys","forEach","key","setAttribute","children","length","leaf","VIEW_RANGE","MARK_DISTANCE","J2D","initCSS3D","Array","isArray","markCSS3D","tree","style","class","arr","MARK_SIZE","box","item","className","dx","dy","click","eventName","transform","FACE_HAFL_WIDTH","chartlet","chartletCSS3D","img_common_style","faces","querySelectorAll","index"],"mappings":"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","file":"procupine.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Pro\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Pro\"] = factory();\n\telse\n\t\troot[\"Pro\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","const Device = require('@/lib/Device.js');\r\nconst Scene = require('@/lib/Scene.js');\r\nconst Marks = require('@/lib/Marks');\r\nconst Dragger = require('@/lib/Dragger.js');\r\n\r\nfunction Pro(setting) {\r\n    this.xrot = 0;\r\n    this.yrot = 0;\r\n    this.zrot = 0;\r\n\r\n    this.eventer = null;\r\n\r\n    this.init(setting);\r\n    console.log('Pro init');\r\n}\r\n\r\nPro.prototype = {\r\n    init(setting) {\r\n        this.$setting = setting;\r\n        var that = this;\r\n\r\n        if (setting.scene) {\r\n            this.$scene = new Scene(setting.scene);\r\n        }\r\n\r\n        if (setting.marks) {\r\n            this.$marks = new Marks(setting.marks);\r\n        }\r\n\r\n        if (this.$setting.mode === 'drag') {\r\n            this.switchModel('drag');\r\n        } else {\r\n            this.switchModel('orientation');\r\n        }\r\n    },\r\n    update(obj) {\r\n        this.xrot = obj.x;\r\n        this.yrot = obj.y;\r\n        this.zrot = obj.z;\r\n\r\n        if (this.$setting.scene) {\r\n            if (this.$setting.scene.type == 'css') {\r\n                this.$scene.driveCSS3D({\r\n                    x: obj.x,\r\n                    y: obj.y,\r\n                    z: obj.z,\r\n                });\r\n            }\r\n        }\r\n\r\n        if (this.$setting.marks) {\r\n            this.$marks.driveCSS3D({\r\n                x: obj.x,\r\n                y: obj.y,\r\n                z: obj.z,\r\n            });\r\n        }\r\n\r\n        this.$setting.handler &&\r\n            this.$setting.handler({\r\n                x: this.xrot,\r\n                y: this.yrot,\r\n                z: this.zrot,\r\n            });\r\n    },\r\n    switchModel(type, success, failed) {\r\n        var that = this;\r\n\r\n        try {\r\n            that.eventer.destroy();\r\n        } catch (e) {}\r\n\r\n        var switchObj = {\r\n            drag() {\r\n                that.eventer = new Dragger({\r\n                    handler: function () {\r\n                        that.update({\r\n                            x: +this.xr,\r\n                            y: -this.yr,\r\n                            z: 0,\r\n                        });\r\n                    },\r\n                });\r\n\r\n                that.$setting.mode = 'drag';\r\n\r\n                success && success();\r\n            },\r\n            orientation() {\r\n                if (!window.DeviceOrientationEvent) {\r\n                    console.error('您的浏览器不支持相关传感器的调用，已为您打开拖拽模式');\r\n                    that.switchModel('drag');\r\n                    failed && failed();\r\n                    return;\r\n                }\r\n\r\n                function deviceorientationHandler(event) {\r\n                    var revent = new Device(event);\r\n\r\n                    that.update({\r\n                        x: revent.R_X,\r\n                        y: revent.R_Y,\r\n                        z: revent.R_Z,\r\n                    });\r\n\r\n                    revent = null;\r\n                }\r\n\r\n                window.addEventListener('deviceorientation', deviceorientationHandler);\r\n\r\n                that.eventer = {\r\n                    destroy() {\r\n                        window.ondeviceorientation = null;\r\n\r\n                        window.removeEventListener('deviceorientation', deviceorientationHandler);\r\n                    },\r\n                };\r\n\r\n                that.$setting.mode = 'orientation';\r\n\r\n                success && success();\r\n            },\r\n        };\r\n\r\n        switchObj[type]();\r\n    },\r\n};\r\n\r\nmodule.exports = Pro;\r\n","function Device(event) {\r\n    var a_alpha = event.alpha,\r\n        B_beta = event.beta,\r\n        Y_gamma = event.gamma,\r\n        abs = event.absolute;\r\n\r\n    var R_Z = -(Y_gamma * Math.cos( this.deg2radian(B_beta) )),\r\n        R_X = (B_beta - 90) * Math.cos( this.deg2radian(Y_gamma) ),\r\n        R_Y = -(a_alpha + Y_gamma);\r\n\r\n    return {\r\n        R_Z: R_Z,\r\n        R_X: R_X,\r\n        R_Y: R_Y\r\n    }\r\n}\r\n\r\nDevice.prototype = {\r\n    deg2radian(deg) {\r\n        const radian = Math.PI / 180;\r\n        return deg * radian;\r\n    }\r\n};\r\n\r\nmodule.exports = Device\r\n","function Dragger(obj) {\r\n    this.init(obj);\r\n}\r\n\r\nDragger.prototype = {\r\n    init(obj) {\r\n        this.xr = 0;\r\n        this.yr = 0;\r\n\r\n        this.$setting = obj;\r\n\r\n        this.eventType = '';\r\n\r\n        this._state = 0; // 0 静止；1 开始；2 拖拽；\r\n        this._handlers = {}; // 事件对象\r\n\r\n        this._eventsMap = {\r\n            touch: ['touchstart', 'touchmove', 'touchend'],\r\n            mouse: ['mousedown', 'mousemove', 'mouseup'],\r\n        };\r\n\r\n        if ('ontouchstart' in document) {\r\n            this.initListener('touch');\r\n        } else {\r\n            this.initListener('mouse');\r\n        }\r\n    },\r\n    // 构建动作函数\r\n    _handlerBuilder() {\r\n        var that = this;\r\n\r\n        let startX = 0, // 开始动作x\r\n            startY = 0, // 开始动作y\r\n            last_x = 0, // 上次动作停止点x\r\n            last_y = 0; // 上次动作停止点y\r\n\r\n        return {\r\n            startHandler(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                var ev = that.eventType === 'touch' ? event.touches[0] : event;\r\n\r\n                startX = ev.clientX;\r\n                startY = ev.clientY;\r\n\r\n                that._state = 1;\r\n            },\r\n            moveHandler(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                var ev = that.eventType === 'touch' ? event.touches[0] : event;\r\n\r\n                var deltaX = ev.clientY - startY, // 滑动距离x\r\n                    deltaY = ev.clientX - startX, // 滑动距离y\r\n                    xrSpeed = deltaX / 2, // 滑动速度x\r\n                    yrSpeed = deltaY / 2; // 滑动速度y\r\n\r\n                that.xr = last_x + xrSpeed;\r\n                that.yr = last_y + yrSpeed;\r\n\r\n                that.$setting.handler && that.$setting.handler.call(that);\r\n\r\n                that._state = 2;\r\n            },\r\n            endHandler(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                last_x = that.xr;\r\n                last_y = that.yr;\r\n\r\n                that._state = 0;\r\n            },\r\n        };\r\n    },\r\n    initListener(eventType) {\r\n        this.eventType = eventType;\r\n\r\n        var eventArr = this._eventsMap[this.eventType];\r\n\r\n        this._handlers = this._handlerBuilder();\r\n\r\n        document.addEventListener(eventArr[0], this._handlers.startHandler, { passive: false });\r\n        document.addEventListener(eventArr[1], this._handlers.moveHandler, { passive: false });\r\n        document.addEventListener(eventArr[2], this._handlers.endHandler, { passive: false });\r\n    },\r\n    destroy() {\r\n        var eventArr = this._eventsMap[this.eventType];\r\n\r\n        document.removeEventListener(eventArr[0], this._handlers.startHandler);\r\n        document.removeEventListener(eventArr[1], this._handlers.moveHandler);\r\n        document.removeEventListener(eventArr[2], this._handlers.endHandler);\r\n\r\n        this._handlers = {};\r\n    },\r\n};\r\n\r\nmodule.exports = Dragger;\r\n","function Json2Dom(obj) {\r\n    this.init(obj)\r\n}\r\n\r\nJson2Dom.prototype = {\r\n    init(obj) {\r\n        this.$el = document.querySelector(obj.el)\r\n    },\r\n    build(json) {\r\n        // json = Array.isArray(json) ? json : [json];\r\n\r\n        var vdom = this.deepTree(json);\r\n\r\n        this.$dom = vdom;\r\n        this.$el.appendChild(vdom);\r\n    },\r\n    clear() {\r\n        this.$el.innerHtml = '';\r\n    },\r\n    deepTree(node) {\r\n        var that = this;\r\n        // var vc = document.createDocumentFragment();\r\n        //\r\n        // node.forEach(function(leaf) {\r\n        //     var tag = document.createElement(leaf.tag);\r\n        //     if(leaf.attr) {\r\n        //         Object.keys(leaf.attr).forEach(function(key) {\r\n        //             tag.setAttribute(key, leaf.attr[key]);\r\n        //         });\r\n        //     };\r\n        //     vc.appendChild(tag);\r\n        //\r\n        //     if(leaf.children && leaf.children.length > 0) {\r\n        //         tag.appendChild(that.deepTree(leaf.children));\r\n        //     }\r\n        // });\r\n\r\n        // return vc;\r\n\r\n\r\n        var tag = document.createElement(node.tag);\r\n        if(node.attr) {\r\n            Object.keys(node.attr).forEach(function(key) {\r\n                tag.setAttribute(key, node.attr[key]);\r\n            });\r\n        };\r\n\r\n        if(node.children && node.children.length > 0) {\r\n            node.children.forEach(function(leaf) {\r\n                tag.appendChild(that.deepTree(leaf))\r\n            })\r\n        }\r\n\r\n        return tag;\r\n    }\r\n};\r\n\r\nmodule.exports = Json2Dom\r\n","const Json2Dom = require('@/lib/Json2Dom.js');\r\nconst { VIEW_RANGE, MARK_DISTANCE } = require('./var.js');\r\n\r\nfunction Marks(obj) {\r\n    this.init(obj);\r\n}\r\n\r\nMarks.prototype = {\r\n    init(obj) {\r\n        this.$setting = obj;\r\n\r\n        this.J2D = new Json2Dom({\r\n            el: 'body',\r\n        });\r\n\r\n        this.initCSS3D();\r\n\r\n        this.$dom = this.J2D.$dom;\r\n\r\n        if (this.$setting && Array.isArray(this.$setting) && this.$setting.length > 0) {\r\n            this.markCSS3D(this.$setting);\r\n        }\r\n    },\r\n    initCSS3D() {\r\n        var tree = {\r\n            tag: 'div',\r\n            attr: {\r\n                style: `\r\n                    position: fixed; \r\n                    left: 0; \r\n                    right: 0; \r\n                    top: 0; \r\n                    bottom: 0; \r\n                    overflow: hidden;\r\n                `,\r\n                class: 'css3__marks--con',\r\n            },\r\n            children: [\r\n                {\r\n                    tag: 'div',\r\n                    attr: {\r\n                        style: `\r\n                            transform-style: preserve-3d; \r\n                            perspective: ${VIEW_RANGE}; \r\n                            width: 100%; \r\n                            height: 100%;\r\n                        `,\r\n                        class: 'css3__marks--stage',\r\n                    },\r\n                    children: [\r\n                        {\r\n                            tag: 'div',\r\n                            attr: {\r\n                                style: `\r\n                                    position: relative; \r\n                                    left: 0;\r\n                                    right: 0;\r\n                                    top: 0;\r\n                                    bottom: 0;\r\n                                    transform-style: preserve-3d;\r\n                                    width: 100%;\r\n                                    height: 100%;\r\n                                    transform: translate3d(50%, 50%, ${VIEW_RANGE});\r\n                                `,\r\n                                class: 'css3__marks--box',\r\n                            },\r\n                            children: [],\r\n                        },\r\n                    ],\r\n                },\r\n            ],\r\n        };\r\n\r\n        this.J2D.build(tree);\r\n    },\r\n    markCSS3D(arr) {\r\n        var MARK_SIZE = '60px';\r\n\r\n        var box = this.$dom.querySelector('.css3__marks--box');\r\n\r\n        arr.forEach((item) => {\r\n            const { x, y } = item;\r\n\r\n            let el = document.createElement('div');\r\n\r\n            el.className = 'css3__marks--item';\r\n\r\n            let dx = -x,\r\n                dy = 360 - (y % 360);\r\n\r\n            el.style = `\r\n                width: ${MARK_SIZE}; \r\n                height: ${MARK_SIZE}; \r\n                position: absolute;\r\n                background: rgba(255,255,255,.7); \r\n                border-radius: 50%;\r\n                transform-origin: center center;\r\n                transform: rotateX(${dx}deg) rotateY(${dy}deg) translate3d(0, 0, -${MARK_DISTANCE}px);\r\n            `;\r\n\r\n            // 绑定事件\r\n            if (item.click) {\r\n                var eventName = 'click';\r\n\r\n                if('ontouchstart' in document) {\r\n                    eventName = 'touchstart';\r\n                }\r\n\r\n                el.addEventListener(eventName, event => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n\r\n                    item.click(event);\r\n                });\r\n            }\r\n\r\n            box.appendChild(el);\r\n        });\r\n    },\r\n    driveCSS3D: function (obj) {\r\n        var R_X = obj.x,\r\n            R_Y = obj.y,\r\n            R_Z = obj.z,\r\n            box = document.querySelector('.css3__marks--box');\r\n\r\n        box.style.transform = `\r\n            translate3d(0, 0, ${VIEW_RANGE}) \r\n            rotateZ(${R_Z}deg) \r\n            rotateX(${R_X}deg) \r\n            rotateY(${R_Y}deg) \r\n            translate3d(50%, 50%, 0)\r\n        `;\r\n    },\r\n};\r\n\r\nmodule.exports = Marks;\r\n","const Json2Dom = require('@/lib/Json2Dom.js');\r\nconst { VIEW_RANGE, FACE_HAFL_WIDTH } = require('./var.js');\r\nfunction Scene(obj) {\r\n    this.init(obj);\r\n}\r\n\r\nScene.prototype = {\r\n    init(obj) {\r\n        this.$setting = obj;\r\n\r\n        this.J2D = new Json2Dom({\r\n            el: 'body',\r\n        });\r\n\r\n        if (obj.type && obj.type === 'canvas') {\r\n            // TODO: canvas scene\r\n        } else {\r\n            this.initCSS3D();\r\n        }\r\n        this.$dom = this.J2D.$dom;\r\n\r\n        if (this.$setting.chartlet && Array.isArray(this.$setting.chartlet) && this.$setting.chartlet.length > 0) {\r\n            if (obj.type && obj.type === 'canvas') {\r\n                // TODO: canvas chartlet\r\n            } else {\r\n                this.chartletCSS3D(this.$setting.chartlet);\r\n            }\r\n        }\r\n    },\r\n    initCSS3D() {\r\n        var img_common_style = `\r\n                width: ${(FACE_HAFL_WIDTH + 1) * 2}px; \r\n                height: ${(FACE_HAFL_WIDTH + 1) * 2}px; \r\n                position: absolute;\r\n            `;\r\n\r\n        var tree = {\r\n            tag: 'div',\r\n            attr: {\r\n                style: `\r\n                    position:fixed; \r\n                    left:0; \r\n                    right:0; \r\n                    top:0; \r\n                    bottom:0; \r\n                    overflow:hidden;\r\n                `,\r\n                class: 'css3__scene--con',\r\n            },\r\n            children: [\r\n                {\r\n                    tag: 'div',\r\n                    attr: {\r\n                        style: `\r\n                            transform-style: preserve-3d; \r\n                            perspective: ${VIEW_RANGE}; \r\n                            width: 100%; \r\n                            height: 100%;\r\n                        `,\r\n                        class: 'css3__scene--stage',\r\n                    },\r\n                    children: [\r\n                        {\r\n                            tag: 'div',\r\n                            attr: {\r\n                                style: `\r\n                                    position: relative;\r\n                                    left: 0;\r\n                                    right: 0;\r\n                                    top: 0;\r\n                                    bottom: 0;\r\n                                    transform-style: preserve-3d;\r\n                                    width: 100%;\r\n                                    height: 100%;\r\n                                    transform: translate3d(50%, 50%, ${VIEW_RANGE});\r\n                                `,\r\n                                class: 'css3__scene--box',\r\n                            },\r\n                            children: [\r\n                                {\r\n                                    tag: 'img',\r\n                                    attr: {\r\n                                        style: `\r\n                                            ${img_common_style}\r\n                                            transform: translate3d(-50%, -50%, 0)\r\n                                                rotateY(-90deg)\r\n                                                translateZ(-${FACE_HAFL_WIDTH}px);\r\n                                            background-color: red;\r\n                                        `,\r\n                                        class: 'css3__scene--faces',\r\n                                    },\r\n                                },\r\n                                {\r\n                                    tag: 'img',\r\n                                    attr: {\r\n                                        style: `\r\n                                            ${img_common_style}\r\n                                            transform: translate3d(-50%, -50%, 0)\r\n                                                rotateY(90deg)\r\n                                                translateZ(-${FACE_HAFL_WIDTH}px);\r\n                                            background-color: orange;\r\n                                        `,\r\n                                        class: 'css3__scene--faces',\r\n                                    },\r\n                                },\r\n                                {\r\n                                    tag: 'img',\r\n                                    attr: {\r\n                                        style: `\r\n                                            ${img_common_style}\r\n                                            transform: translate3d(-50%, -50%, 0)\r\n                                                rotateX(-90deg)\r\n                                                translateZ(-${FACE_HAFL_WIDTH}px);\r\n                                            background-color: yellow;\r\n                                        `,\r\n                                        class: 'css3__scene--faces',\r\n                                    },\r\n                                },\r\n                                {\r\n                                    tag: 'img',\r\n                                    attr: {\r\n                                        style: `\r\n                                            ${img_common_style}\r\n                                            transform: translate3d(-50%, -50%, 0)\r\n                                                rotateX(90deg)\r\n                                                translateZ(-${FACE_HAFL_WIDTH}px);\r\n                                            background-color: green;\r\n                                        `,\r\n                                        class: 'css3__scene--faces',\r\n                                    },\r\n                                },\r\n                                {\r\n                                    tag: 'img',\r\n                                    attr: {\r\n                                        style: `\r\n                                            ${img_common_style}\r\n                                            transform: translate3d(-50%, -50%, 0)\r\n                                                rotateY(0deg)\r\n                                                translateZ(-${FACE_HAFL_WIDTH}px);\r\n                                            background-color: blue;\r\n                                        `,\r\n                                        class: 'css3__scene--faces',\r\n                                    },\r\n                                },\r\n                                {\r\n                                    tag: 'img',\r\n                                    attr: {\r\n                                        style: `\r\n                                            ${img_common_style}\r\n                                            transform: translate3d(-50%, -50%, 0)\r\n                                                rotateY(180deg)\r\n                                                translateZ(-${FACE_HAFL_WIDTH}px);\r\n                                            background-color: purple;\r\n                                        `,\r\n                                        class: 'css3__scene--faces',\r\n                                    },\r\n                                },\r\n                            ],\r\n                        },\r\n                    ],\r\n                },\r\n            ],\r\n        };\r\n\r\n        this.J2D.build(tree);\r\n    },\r\n    chartletCSS3D(arr) {\r\n        var faces = this.$dom.querySelectorAll('.css3__scene--faces');\r\n\r\n        faces.forEach(function (node, index) {\r\n            node.setAttribute('src', arr[index]);\r\n        });\r\n    },\r\n    driveCSS3D: function (obj) {\r\n        if (this.$setting.type !== 'css') {\r\n            console.error('Your Scene is not css3d model');\r\n            return;\r\n        }\r\n\r\n        var R_X = obj.x,\r\n            R_Y = obj.y,\r\n            R_Z = obj.z,\r\n            box = document.querySelector('.css3__scene--box');\r\n\r\n        box.style.transform = `\r\n            translate3d(0, 0, ${VIEW_RANGE}) \r\n            rotateZ(${R_Z}deg) \r\n            rotateX(${R_X}deg) \r\n            rotateY(${R_Y}deg) \r\n            translate3d(50%, 50%, 0)\r\n        `;\r\n    },\r\n};\r\n\r\nmodule.exports = Scene;\r\n","module.exports = {\r\n    VIEW_RANGE: '398.135px', // 视口距离\r\n    FACE_HAFL_WIDTH: 512, // 场景盒子面的半宽，贴图的视觉距离\r\n    MARK_DISTANCE: 512, // mark视觉距离\r\n};\r\n"],"sourceRoot":""}